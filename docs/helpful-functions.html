<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11 Helpful Functions | NEON Ecological Forecasting Challenge</title>
  <meta name="description" content="Documentation for the NEON Ecological Forecasting Challenge" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="11 Helpful Functions | NEON Ecological Forecasting Challenge" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://seankross.com/bookdown-start/" />
  
  <meta property="og:description" content="Documentation for the NEON Ecological Forecasting Challenge" />
  <meta name="github-repo" content="eco4cast/neon4cast-docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11 Helpful Functions | NEON Ecological Forecasting Challenge" />
  
  <meta name="twitter:description" content="Documentation for the NEON Ecological Forecasting Challenge" />
  

<meta name="author" content="Hosted by the Ecological Forecasting Initative Research Coordination Network and supported by National Science Foundation (DEB-1926388)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="meteorology-inputs.html"/>
<link rel="next" href="frequently-asked-questions.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NEON Ecological Forecasting Challenge</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html"><i class="fa fa-check"></i><b>1</b> Theme: Aquatic Ecosystems</a>
<ul>
<li class="chapter" data-level="1.1" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#challenge"><i class="fa fa-check"></i><b>1.2</b> Challenge</a></li>
<li class="chapter" data-level="1.3" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#data-targets"><i class="fa fa-check"></i><b>1.3</b> Data: Targets</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#surface-mean-daily-dissolved-oxygen-concentration"><i class="fa fa-check"></i><b>1.3.1</b> Surface Mean Daily Dissolved Oxygen Concentration</a></li>
<li class="chapter" data-level="1.3.2" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#surface-mean-daily-water-temperature"><i class="fa fa-check"></i><b>1.3.2</b> Surface Mean Daily Water Temperature</a></li>
<li class="chapter" data-level="1.3.3" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#focal-sites"><i class="fa fa-check"></i><b>1.3.3</b> Focal sites</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#timeline"><i class="fa fa-check"></i><b>1.4</b> Timeline</a></li>
<li class="chapter" data-level="1.5" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#design-team"><i class="fa fa-check"></i><b>1.5</b> Design Team</a></li>
<li class="chapter" data-level="1.6" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#partners"><i class="fa fa-check"></i><b>1.6</b> Partners</a></li>
<li class="chapter" data-level="1.7" data-path="theme-aquatic-ecosystems.html"><a href="theme-aquatic-ecosystems.html#references"><i class="fa fa-check"></i><b>1.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html"><i class="fa fa-check"></i><b>2</b> Theme: Carbon and Water Fluxes</a>
<ul>
<li class="chapter" data-level="2.1" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#overview-1"><i class="fa fa-check"></i><b>2.1</b> Overview</a></li>
<li class="chapter" data-level="2.2" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#challenge-1"><i class="fa fa-check"></i><b>2.2</b> Challenge</a></li>
<li class="chapter" data-level="2.3" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#data-targets-1"><i class="fa fa-check"></i><b>2.3</b> Data: Targets</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#net-ecosystem-exchange"><i class="fa fa-check"></i><b>2.3.1</b> Net ecosystem exchange</a></li>
<li class="chapter" data-level="2.3.2" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#latent-heat-flux"><i class="fa fa-check"></i><b>2.3.2</b> Latent heat flux</a></li>
<li class="chapter" data-level="2.3.3" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#soil-moisture"><i class="fa fa-check"></i><b>2.3.3</b> Soil moisture</a></li>
<li class="chapter" data-level="2.3.4" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#focal-sites-1"><i class="fa fa-check"></i><b>2.3.4</b> Focal sites</a></li>
<li class="chapter" data-level="2.3.5" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#minute-target-data-calulation"><i class="fa fa-check"></i><b>2.3.5</b> 30-minute target data calulation</a></li>
<li class="chapter" data-level="2.3.6" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#daily-target-data-calulation"><i class="fa fa-check"></i><b>2.3.6</b> Daily target data calulation</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#timeline-1"><i class="fa fa-check"></i><b>2.4</b> Timeline</a></li>
<li class="chapter" data-level="2.5" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#design-team-1"><i class="fa fa-check"></i><b>2.5</b> Design team</a></li>
<li class="chapter" data-level="2.6" data-path="theme-carbon-and-water-fluxes.html"><a href="theme-carbon-and-water-fluxes.html#partners-1"><i class="fa fa-check"></i><b>2.6</b> Partners</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html"><i class="fa fa-check"></i><b>3</b> Theme: Tick Populations</a>
<ul>
<li class="chapter" data-level="3.1" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#overview-2"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#challenge-2"><i class="fa fa-check"></i><b>3.2</b> Challenge</a></li>
<li class="chapter" data-level="3.3" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#data-targets-2"><i class="fa fa-check"></i><b>3.3</b> Data: Targets</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#amblyomma-americanum-nymphs"><i class="fa fa-check"></i><b>3.3.1</b> Amblyomma americanum nymphs</a></li>
<li class="chapter" data-level="3.3.2" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#ixodes-scapularis-nymphs"><i class="fa fa-check"></i><b>3.3.2</b> Ixodes scapularis nymphs</a></li>
<li class="chapter" data-level="3.3.3" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#focal-sites-2"><i class="fa fa-check"></i><b>3.3.3</b> Focal sites</a></li>
<li class="chapter" data-level="3.3.4" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#target-data-calculation"><i class="fa fa-check"></i><b>3.3.4</b> Target data calculation</a></li>
<li class="chapter" data-level="3.3.5" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#target-file"><i class="fa fa-check"></i><b>3.3.5</b> Target file</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#timeline-2"><i class="fa fa-check"></i><b>3.4</b> Timeline</a></li>
<li class="chapter" data-level="3.5" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#design-team-2"><i class="fa fa-check"></i><b>3.5</b> Design team</a></li>
<li class="chapter" data-level="3.6" data-path="theme-tick-populations.html"><a href="theme-tick-populations.html#partners-2"><i class="fa fa-check"></i><b>3.6</b> Partners</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html"><i class="fa fa-check"></i><b>4</b> Theme: Spring Phenology</a>
<ul>
<li class="chapter" data-level="4.1" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#overview-3"><i class="fa fa-check"></i><b>4.1</b> Overview</a></li>
<li class="chapter" data-level="4.2" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#challenge-3"><i class="fa fa-check"></i><b>4.2</b> Challenge</a></li>
<li class="chapter" data-level="4.3" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#data-targets-3"><i class="fa fa-check"></i><b>4.3</b> Data: Targets</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#green-chromatic-coordinate-gcc"><i class="fa fa-check"></i><b>4.3.1</b> Green chromatic coordinate (gcc)</a></li>
<li class="chapter" data-level="4.3.2" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#focal-sites-3"><i class="fa fa-check"></i><b>4.3.2</b> Focal sites</a></li>
<li class="chapter" data-level="4.3.3" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#target-data-calculation-1"><i class="fa fa-check"></i><b>4.3.3</b> Target data calculation</a></li>
<li class="chapter" data-level="4.3.4" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#target-file-1"><i class="fa fa-check"></i><b>4.3.4</b> Target file</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#timeline-3"><i class="fa fa-check"></i><b>4.4</b> Timeline</a></li>
<li class="chapter" data-level="4.5" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#design-team-3"><i class="fa fa-check"></i><b>4.5</b> Design team</a></li>
<li class="chapter" data-level="4.6" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#partners-3"><i class="fa fa-check"></i><b>4.6</b> Partners</a></li>
<li class="chapter" data-level="4.7" data-path="theme-spring-phenology.html"><a href="theme-spring-phenology.html#references-1"><i class="fa fa-check"></i><b>4.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html"><i class="fa fa-check"></i><b>5</b> Theme: Autumn phenology</a>
<ul>
<li class="chapter" data-level="5.1" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#overview-4"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#challenge-4"><i class="fa fa-check"></i><b>5.2</b> Challenge</a></li>
<li class="chapter" data-level="5.3" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#data-targets-4"><i class="fa fa-check"></i><b>5.3</b> Data: Targets:</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#green-chromatic-coordinate-gcc-1"><i class="fa fa-check"></i><b>5.3.1</b> Green chromatic coordinate (gcc)</a></li>
<li class="chapter" data-level="5.3.2" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#red-chromatic-coordinate-rcc"><i class="fa fa-check"></i><b>5.3.2</b> Red chromatic coordinate (rcc)</a></li>
<li class="chapter" data-level="5.3.3" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#focal-sites-4"><i class="fa fa-check"></i><b>5.3.3</b> Focal sites</a></li>
<li class="chapter" data-level="5.3.4" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#target-data-calculation-2"><i class="fa fa-check"></i><b>5.3.4</b> Target data calculation</a></li>
<li class="chapter" data-level="5.3.5" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#target-file-2"><i class="fa fa-check"></i><b>5.3.5</b> Target file</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#timeline-4"><i class="fa fa-check"></i><b>5.4</b> Timeline</a></li>
<li class="chapter" data-level="5.5" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#design-team-4"><i class="fa fa-check"></i><b>5.5</b> Design team</a></li>
<li class="chapter" data-level="5.6" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#partners-4"><i class="fa fa-check"></i><b>5.6</b> Partners</a></li>
<li class="chapter" data-level="5.7" data-path="theme-autumn-phenology.html"><a href="theme-autumn-phenology.html#references-2"><i class="fa fa-check"></i><b>5.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html"><i class="fa fa-check"></i><b>6</b> Theme: Beetle Communities</a>
<ul>
<li class="chapter" data-level="6.1" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#overview-5"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#challenge-5"><i class="fa fa-check"></i><b>6.2</b> Challenge</a></li>
<li class="chapter" data-level="6.3" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#data-targets-5"><i class="fa fa-check"></i><b>6.3</b> Data: Targets</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#abundance-of-beetles-abundance"><i class="fa fa-check"></i><b>6.3.1</b> Abundance of beetles (abundance)</a></li>
<li class="chapter" data-level="6.3.2" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#species-richness-n"><i class="fa fa-check"></i><b>6.3.2</b> Species richness (n)</a></li>
<li class="chapter" data-level="6.3.3" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#focal-sites-5"><i class="fa fa-check"></i><b>6.3.3</b> Focal sites</a></li>
<li class="chapter" data-level="6.3.4" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#target-data-calculation-3"><i class="fa fa-check"></i><b>6.3.4</b> Target data calculation</a></li>
<li class="chapter" data-level="6.3.5" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#target-file-3"><i class="fa fa-check"></i><b>6.3.5</b> Target file</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#timeline-5"><i class="fa fa-check"></i><b>6.4</b> Timeline</a></li>
<li class="chapter" data-level="6.5" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#design-team-5"><i class="fa fa-check"></i><b>6.5</b> Design team</a></li>
<li class="chapter" data-level="6.6" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#partners-5"><i class="fa fa-check"></i><b>6.6</b> Partners</a></li>
<li class="chapter" data-level="6.7" data-path="theme-beetle-communities.html"><a href="theme-beetle-communities.html#references-3"><i class="fa fa-check"></i><b>6.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="participation.html"><a href="participation.html"><i class="fa fa-check"></i><b>7</b> Participation</a>
<ul>
<li class="chapter" data-level="7.1" data-path="participation.html"><a href="participation.html#participation-guidance"><i class="fa fa-check"></i><b>7.1</b> Participation guidance</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="participation.html"><a href="participation.html#how-to-participate"><i class="fa fa-check"></i><b>7.1.1</b> How to participate</a></li>
<li class="chapter" data-level="7.1.2" data-path="participation.html"><a href="participation.html#teams"><i class="fa fa-check"></i><b>7.1.2</b> Teams</a></li>
<li class="chapter" data-level="7.1.3" data-path="participation.html"><a href="participation.html#slack-and-github-communication"><i class="fa fa-check"></i><b>7.1.3</b> Slack and GitHub Communication</a></li>
<li class="chapter" data-level="7.1.4" data-path="participation.html"><a href="participation.html#archiving-models"><i class="fa fa-check"></i><b>7.1.4</b> Archiving models</a></li>
<li class="chapter" data-level="7.1.5" data-path="participation.html"><a href="participation.html#computational-resources"><i class="fa fa-check"></i><b>7.1.5</b> Computational resources</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="participation.html"><a href="participation.html#participation-agreement"><i class="fa fa-check"></i><b>7.2</b> Participation agreement</a></li>
<li class="chapter" data-level="7.3" data-path="participation.html"><a href="participation.html#neon-data-use"><i class="fa fa-check"></i><b>7.3</b> NEON Data Use</a></li>
<li class="chapter" data-level="7.4" data-path="participation.html"><a href="participation.html#additional-data-options"><i class="fa fa-check"></i><b>7.4</b> Additional data options</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="submission-instructions.html"><a href="submission-instructions.html"><i class="fa fa-check"></i><b>8</b> Submission Instructions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="submission-instructions.html"><a href="submission-instructions.html#forecast-format"><i class="fa fa-check"></i><b>8.1</b> Forecast format</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="submission-instructions.html"><a href="submission-instructions.html#terrestrial"><i class="fa fa-check"></i><b>8.1.1</b> Terrestrial</a></li>
<li class="chapter" data-level="8.1.2" data-path="submission-instructions.html"><a href="submission-instructions.html#beetles"><i class="fa fa-check"></i><b>8.1.2</b> Beetles</a></li>
<li class="chapter" data-level="8.1.3" data-path="submission-instructions.html"><a href="submission-instructions.html#aquatics"><i class="fa fa-check"></i><b>8.1.3</b> Aquatics</a></li>
<li class="chapter" data-level="8.1.4" data-path="submission-instructions.html"><a href="submission-instructions.html#phenology"><i class="fa fa-check"></i><b>8.1.4</b> Phenology</a></li>
<li class="chapter" data-level="8.1.5" data-path="submission-instructions.html"><a href="submission-instructions.html#ticks"><i class="fa fa-check"></i><b>8.1.5</b> Ticks</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="submission-instructions.html"><a href="submission-instructions.html#metadata-format"><i class="fa fa-check"></i><b>8.2</b> Metadata format</a></li>
<li class="chapter" data-level="8.3" data-path="submission-instructions.html"><a href="submission-instructions.html#submission-process"><i class="fa fa-check"></i><b>8.3</b> Submission process</a></li>
<li class="chapter" data-level="8.4" data-path="submission-instructions.html"><a href="submission-instructions.html#validating-submission"><i class="fa fa-check"></i><b>8.4</b> Validating submission</a></li>
<li class="chapter" data-level="8.5" data-path="submission-instructions.html"><a href="submission-instructions.html#visualizing-submissions"><i class="fa fa-check"></i><b>8.5</b> Visualizing submissions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="evaluation.html"><a href="evaluation.html"><i class="fa fa-check"></i><b>9</b> Evaluation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="evaluation.html"><a href="evaluation.html#results"><i class="fa fa-check"></i><b>9.1</b> Results</a></li>
<li class="chapter" data-level="9.2" data-path="evaluation.html"><a href="evaluation.html#scoring-metric-continuous-ranked-probability-score"><i class="fa fa-check"></i><b>9.2</b> Scoring Metric: Continuous Ranked Probability Score</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="evaluation.html"><a href="evaluation.html#example-of-a-crps-calculation-from-an-ensemble-forecast"><i class="fa fa-check"></i><b>9.2.1</b> Example of a CRPS calculation from an ensemble forecast</a></li>
<li class="chapter" data-level="9.2.2" data-path="evaluation.html"><a href="evaluation.html#exploring-the-scoring-surface"><i class="fa fa-check"></i><b>9.2.2</b> Exploring the scoring surface</a></li>
<li class="chapter" data-level="9.2.3" data-path="evaluation.html"><a href="evaluation.html#crps-from-the-normal-distribution"><i class="fa fa-check"></i><b>9.2.3</b> CRPS from the Normal Distribution</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="evaluation.html"><a href="evaluation.html#null-forecast"><i class="fa fa-check"></i><b>9.3</b> Null forecast</a></li>
<li class="chapter" data-level="9.4" data-path="evaluation.html"><a href="evaluation.html#forecast-submission-visualization-and-leaderboard"><i class="fa fa-check"></i><b>9.4</b> Forecast Submission Visualization and Leaderboard</a></li>
<li class="chapter" data-level="9.5" data-path="evaluation.html"><a href="evaluation.html#references-4"><i class="fa fa-check"></i><b>9.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="meteorology-inputs.html"><a href="meteorology-inputs.html"><i class="fa fa-check"></i><b>10</b> Meteorology Inputs</a>
<ul>
<li class="chapter" data-level="10.1" data-path="meteorology-inputs.html"><a href="meteorology-inputs.html#noaa-global-ensemble-forecasting-system"><i class="fa fa-check"></i><b>10.1</b> NOAA Global Ensemble Forecasting System</a></li>
<li class="chapter" data-level="10.2" data-path="meteorology-inputs.html"><a href="meteorology-inputs.html#neon-observed"><i class="fa fa-check"></i><b>10.2</b> NEON Observed</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="helpful-functions.html"><a href="helpful-functions.html"><i class="fa fa-check"></i><b>11</b> Helpful Functions</a>
<ul>
<li class="chapter" data-level="11.1" data-path="helpful-functions.html"><a href="helpful-functions.html#neon4cast-package"><i class="fa fa-check"></i><b>11.1</b> neon4cast package</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="helpful-functions.html"><a href="helpful-functions.html#installation"><i class="fa fa-check"></i><b>11.1.1</b> Installation</a></li>
<li class="chapter" data-level="11.1.2" data-path="helpful-functions.html"><a href="helpful-functions.html#example-forecast"><i class="fa fa-check"></i><b>11.1.2</b> Example forecast</a></li>
<li class="chapter" data-level="11.1.3" data-path="helpful-functions.html"><a href="helpful-functions.html#score-forecast-locally"><i class="fa fa-check"></i><b>11.1.3</b> Score forecast locally</a></li>
<li class="chapter" data-level="11.1.4" data-path="helpful-functions.html"><a href="helpful-functions.html#validate-a-forecast-file"><i class="fa fa-check"></i><b>11.1.4</b> Validate a forecast file</a></li>
<li class="chapter" data-level="11.1.5" data-path="helpful-functions.html"><a href="helpful-functions.html#generate-forecast-metadata-in-eml"><i class="fa fa-check"></i><b>11.1.5</b> Generate forecast metadata in EML</a></li>
<li class="chapter" data-level="11.1.6" data-path="helpful-functions.html"><a href="helpful-functions.html#access-efi-snapshots-of-noaa-forecasts-at-neon-sites"><i class="fa fa-check"></i><b>11.1.6</b> Access EFI snapshots of NOAA forecasts at NEON sites</a></li>
<li class="chapter" data-level="11.1.7" data-path="helpful-functions.html"><a href="helpful-functions.html#submit-a-forecast"><i class="fa fa-check"></i><b>11.1.7</b> Submit a forecast</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="helpful-functions.html"><a href="helpful-functions.html#neonstore-package"><i class="fa fa-check"></i><b>11.2</b> neonstore package</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="helpful-functions.html"><a href="helpful-functions.html#installation-1"><i class="fa fa-check"></i><b>11.2.1</b> Installation</a></li>
<li class="chapter" data-level="11.2.2" data-path="helpful-functions.html"><a href="helpful-functions.html#quickstart"><i class="fa fa-check"></i><b>11.2.2</b> Quickstart</a></li>
<li class="chapter" data-level="11.2.3" data-path="helpful-functions.html"><a href="helpful-functions.html#database-backend"><i class="fa fa-check"></i><b>11.2.3</b> Database backend</a></li>
<li class="chapter" data-level="11.2.4" data-path="helpful-functions.html"><a href="helpful-functions.html#note-on-api-limits"><i class="fa fa-check"></i><b>11.2.4</b> Note on API limits</a></li>
<li class="chapter" data-level="11.2.5" data-path="helpful-functions.html"><a href="helpful-functions.html#non-stacking-files-and-low-level-interface"><i class="fa fa-check"></i><b>11.2.5</b> Non-stacking files and low-level interface</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="helpful-functions.html"><a href="helpful-functions.html#efistandards-package"><i class="fa fa-check"></i><b>11.3</b> EFIstandards package</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="helpful-functions.html"><a href="helpful-functions.html#output-files"><i class="fa fa-check"></i><b>11.3.1</b> Output Files:</a></li>
<li class="chapter" data-level="11.3.2" data-path="helpful-functions.html"><a href="helpful-functions.html#output-metadata"><i class="fa fa-check"></i><b>11.3.2</b> Output Metadata:</a></li>
<li class="chapter" data-level="11.3.3" data-path="helpful-functions.html"><a href="helpful-functions.html#archiving"><i class="fa fa-check"></i><b>11.3.3</b> Archiving:</a></li>
<li class="chapter" data-level="11.3.4" data-path="helpful-functions.html"><a href="helpful-functions.html#vignettes"><i class="fa fa-check"></i><b>11.3.4</b> Vignettes:</a></li>
<li class="chapter" data-level="11.3.5" data-path="helpful-functions.html"><a href="helpful-functions.html#documentation"><i class="fa fa-check"></i><b>11.3.5</b> Documentation:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html"><i class="fa fa-check"></i><b>12</b> Frequently Asked Questions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#my-model-uses-meterology-inputs.-where-can-i-find-forecasts-of-weather-to-use-in-my-ecological-forecast"><i class="fa fa-check"></i><b>12.1</b> My model uses meterology inputs. Where can I find forecasts of weather to use in my ecological forecast?</a></li>
<li class="chapter" data-level="12.2" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#i-need-historical-weather-data-to-build-my-model.-where-can-i-find-it"><i class="fa fa-check"></i><b>12.2</b> I need historical weather data to build my model. Where can I find it?</a></li>
<li class="chapter" data-level="12.3" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#i-submitted-my-forecast-but-cannot-find-it-on-the-dashboard-or-in-the-directory-of-forecasts"><i class="fa fa-check"></i><b>12.3</b> I submitted my forecast but cannot find it on the dashboard or in the directory of forecasts</a></li>
<li class="chapter" data-level="12.4" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#do-i-need-to-submit-forecasts-to-every-submission-date"><i class="fa fa-check"></i><b>12.4</b> Do I need to submit forecasts to every submission date?</a></li>
<li class="chapter" data-level="12.5" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#where-can-i-find-examples-of-forecasts-that-match-the-required-standard"><i class="fa fa-check"></i><b>12.5</b> Where can I find examples of forecasts that match the required standard?</a></li>
<li class="chapter" data-level="12.6" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#i-am-having-trouble-generating-the-metadata.-can-you-point-me-to-more-information-tutorials-or-examples"><i class="fa fa-check"></i><b>12.6</b> I am having trouble generating the metadata. Can you point me to more information, tutorials, or examples?</a></li>
<li class="chapter" data-level="12.7" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#how-many-years-are-you-planning-to-run-the-challenge"><i class="fa fa-check"></i><b>12.7</b> How many years are you planning to run the Challenge?</a></li>
<li class="chapter" data-level="12.8" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#are-there-certain-types-of-models-that-i-need-to-use"><i class="fa fa-check"></i><b>12.8</b> Are there certain types of models that I need to use?</a></li>
<li class="chapter" data-level="12.9" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#what-is-the-relationship-between-the-challenge-and-neon"><i class="fa fa-check"></i><b>12.9</b> What is the relationship between the Challenge and NEON?</a></li>
<li class="chapter" data-level="12.10" data-path="frequently-asked-questions.html"><a href="frequently-asked-questions.html#i-am-interested-in-submitting-different-models-or-to-multiple-themes.-how-should-i-register-to-do-this"><i class="fa fa-check"></i><b>12.10</b> I am interested in submitting different models or to multiple themes. How should I register to do this?</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NEON Ecological Forecasting Challenge</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="helpful-functions" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Helpful Functions</h1>
<p>The following are resources to help you prepare your forecasts for submission.</p>
<p>The <a href="https://github.com/eco4cast/neon4cast" target="_blank">neon4cast</a> package provides a collection of convenient helper utilities so you can score your forecast locally, validate the format of your forecast files to check for formatting errors before submitting, generate forecast metadata in EML (coming soon!), access EFI snapshots of NOAA forecasts at NEON sites, and submit your forecast.</p>
<p>The <a href="https://github.com/cboettig/neonstore" target="_blank">neonstore</a> package provides quick access and persistent storage of NEON data tables.</p>
<p>The <a href="https://github.com/eco4cast/EFIstandards" target="_blank">EFIstandards</a> package summarizes the proposed community standards for the common formatting and archiving of ecological forecasts by the Ecological Forecasting Initiative. These standards are a work in progress. If you have suggestions for improvement share them with <a href="mailto:eco4cast.initiative@gmail.com" class="email">eco4cast.initiative@gmail.com</a>.”</p>
<div id="neon4cast-package" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> neon4cast package</h2>
<p>The <code>neon4cast</code> package is located at <a href="https://github.com/eco4cast/neon4cast" class="uri">https://github.com/eco4cast/neon4cast</a></p>
<p><code>neon4cast</code> provides the following collection of convenient helper utilities for
anyone entering the EFI NEON Forecasting Challenge.</p>
<div id="installation" class="section level3" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Installation</h3>
<p>You can install the development version from
<a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="helpful-functions.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;remotes&quot;)</span></span>
<span id="cb51-2"><a href="helpful-functions.html#cb51-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;eco4cast/neon4cast&quot;</span>)</span></code></pre></div>
</div>
<div id="example-forecast" class="section level3" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> Example forecast</h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="helpful-functions.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(neon4cast)</span>
<span id="cb52-2"><a href="helpful-functions.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb52-3"><a href="helpful-functions.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fable)</span>
<span id="cb52-4"><a href="helpful-functions.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span></code></pre></div>
<p>Download and read in the current target file for the Aquatics theme. For
convenience, we read this in as a timeseries object, noting that the
time is in the ‘time’ column, and timeseries are replicated over sites.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="helpful-functions.html#cb53-1" aria-hidden="true" tabindex="-1"></a>aquatic <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://data.ecoforecast.org/targets/aquatics/aquatics-targets.csv.gz&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="helpful-functions.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index=</span>time, <span class="at">key=</span>siteID)</span></code></pre></div>
<p>Create a 35 day forecast for each variable, <code>oxygen</code>, and <code>temperature</code>.
For illustrative purposes, we’ll use the <code>fable</code> package because it is
concise and well documented. We make separate forecasts for each of the
two variables before reformatting them and combining them. Note the use
of <code>efi_format</code> helper function from the <code>neon4cast</code> package, which
merely replaces the special <code>&lt;S3:distribution&gt;</code> column used by fable
with something we can write to text: either columns with a mean/sd (for
normal distributions) or otherwise random draws from the distributions.</p>
<p>So that we can score our forecast right away instead of waiting for next
month’s data, we will filter out the most recent data available first.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="helpful-functions.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop last 35 days and use explicit NAs for gaps in timeseries</span></span>
<span id="cb54-2"><a href="helpful-functions.html#cb54-2" aria-hidden="true" tabindex="-1"></a>blinded_aquatic <span class="ot">&lt;-</span> aquatic <span class="sc">%&gt;%</span> <span class="fu">filter</span>(time <span class="sc">&lt;</span> <span class="fu">max</span>(time) <span class="sc">-</span> <span class="dv">35</span>) <span class="sc">%&gt;%</span> <span class="fu">fill_gaps</span>()</span>
<span id="cb54-3"><a href="helpful-functions.html#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="helpful-functions.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A simple random walk forecast, see ?fable::RW</span></span>
<span id="cb54-5"><a href="helpful-functions.html#cb54-5" aria-hidden="true" tabindex="-1"></a>oxygen_fc <span class="ot">&lt;-</span> blinded_aquatic <span class="sc">%&gt;%</span></span>
<span id="cb54-6"><a href="helpful-functions.html#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">null =</span> <span class="fu">RW</span>(oxygen)) <span class="sc">%&gt;%</span></span>
<span id="cb54-7"><a href="helpful-functions.html#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&quot;35 days&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-8"><a href="helpful-functions.html#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">efi_format</span>()</span>
<span id="cb54-9"><a href="helpful-functions.html#cb54-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-10"><a href="helpful-functions.html#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="do">## also use random walk for temperature</span></span>
<span id="cb54-11"><a href="helpful-functions.html#cb54-11" aria-hidden="true" tabindex="-1"></a>temperature_fc <span class="ot">&lt;-</span> blinded_aquatic  <span class="sc">%&gt;%</span></span>
<span id="cb54-12"><a href="helpful-functions.html#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">null =</span> <span class="fu">RW</span>(temperature)) <span class="sc">%&gt;%</span></span>
<span id="cb54-13"><a href="helpful-functions.html#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&quot;35 days&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb54-14"><a href="helpful-functions.html#cb54-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">efi_format</span>()</span>
<span id="cb54-15"><a href="helpful-functions.html#cb54-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-16"><a href="helpful-functions.html#cb54-16" aria-hidden="true" tabindex="-1"></a><span class="co"># combine into single table, drop the .model column</span></span>
<span id="cb54-17"><a href="helpful-functions.html#cb54-17" aria-hidden="true" tabindex="-1"></a>forecast <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(oxygen_fc, temperature_fc) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>.model)</span>
<span id="cb54-18"><a href="helpful-functions.html#cb54-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-19"><a href="helpful-functions.html#cb54-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Write the forecast to a file following EFI naming conventions:</span></span>
<span id="cb54-20"><a href="helpful-functions.html#cb54-20" aria-hidden="true" tabindex="-1"></a>forecast_file <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;{theme}-{date}-{team}.csv.gz&quot;</span>,</span>
<span id="cb54-21"><a href="helpful-functions.html#cb54-21" aria-hidden="true" tabindex="-1"></a>                            <span class="at">theme =</span> <span class="st">&quot;aquatics&quot;</span>, </span>
<span id="cb54-22"><a href="helpful-functions.html#cb54-22" aria-hidden="true" tabindex="-1"></a>                            <span class="at">date=</span><span class="fu">Sys.Date</span>(),</span>
<span id="cb54-23"><a href="helpful-functions.html#cb54-23" aria-hidden="true" tabindex="-1"></a>                            <span class="at">team =</span> <span class="st">&quot;example_null&quot;</span>)</span>
<span id="cb54-24"><a href="helpful-functions.html#cb54-24" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(forecast, forecast_file)</span></code></pre></div>
</div>
<div id="score-forecast-locally" class="section level3" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> Score forecast locally</h3>
<p>Scores for valid forecasts should appear at
<a href="https://shiny.ecoforecast.org" class="uri">https://shiny.ecoforecast.org</a> the day after they are submitted.
However, it is often more convenient to generate scores locally. Note
that the “score” simply the <code>crps_sample</code> (for ensemble forecasts) or
<code>crps_norm</code> (for summary statistic forecasts) score from the
<code>scoringRules</code> R package, for each unique prediction
(i.e.day/site/variable tuple).</p>
<p>Note that scores are only possible once the data becomes available in
the corresponding targets file!</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="helpful-functions.html#cb55-1" aria-hidden="true" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">score</span>(forecast, <span class="at">theme =</span> <span class="st">&quot;aquatics&quot;</span>)</span>
<span id="cb55-2"><a href="helpful-functions.html#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="helpful-functions.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># The resulting data.frame scores each day for each site, but is also easy to summarize:</span></span>
<span id="cb55-4"><a href="helpful-functions.html#cb55-4" aria-hidden="true" tabindex="-1"></a>scores <span class="sc">%&gt;%</span> </span>
<span id="cb55-5"><a href="helpful-functions.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(siteID, target) <span class="sc">%&gt;%</span> </span>
<span id="cb55-6"><a href="helpful-functions.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_score =</span> <span class="fu">mean</span>(score, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb55-7"><a href="helpful-functions.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 x 3</span></span>
<span id="cb55-8"><a href="helpful-functions.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   siteID target      mean_score</span></span>
<span id="cb55-9"><a href="helpful-functions.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb55-10"><a href="helpful-functions.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 BARC   oxygen           0.677</span></span>
<span id="cb55-11"><a href="helpful-functions.html#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 BARC   temperature    NaN    </span></span>
<span id="cb55-12"><a href="helpful-functions.html#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 POSE   oxygen           0.676</span></span>
<span id="cb55-13"><a href="helpful-functions.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 POSE   temperature      1.42</span></span></code></pre></div>
</div>
<div id="validate-a-forecast-file" class="section level3" number="11.1.4">
<h3><span class="header-section-number">11.1.4</span> Validate a forecast file</h3>
<p>Validating a forecast file runs the same automated checks as the EFI
server, verifying that the data is in the correct format for the
appropriate challenge. Helpful errors or warnings will displayed on any
invalid formats. Note that the validator accepts files in <code>.csv</code>
(optionally compressed as <code>.csv.gz</code>) or netcdf.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="helpful-functions.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">forecast_output_validator</span>(forecast_file)</span>
<span id="cb56-2"><a href="helpful-functions.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; aquatics-2021-03-17-example_null.csv.gz</span></span>
<span id="cb56-3"><a href="helpful-functions.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file name is correct</span></span>
<span id="cb56-4"><a href="helpful-functions.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb56-5"><a href="helpful-functions.html#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb56-6"><a href="helpful-functions.html#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb56-7"><a href="helpful-functions.html#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   time = col_date(format = &quot;&quot;),</span></span>
<span id="cb56-8"><a href="helpful-functions.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   siteID = col_character(),</span></span>
<span id="cb56-9"><a href="helpful-functions.html#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   statistic = col_character(),</span></span>
<span id="cb56-10"><a href="helpful-functions.html#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   oxygen = col_double(),</span></span>
<span id="cb56-11"><a href="helpful-functions.html#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   temperature = col_double()</span></span>
<span id="cb56-12"><a href="helpful-functions.html#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb56-13"><a href="helpful-functions.html#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ target variables found</span></span>
<span id="cb56-14"><a href="helpful-functions.html#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistics column</span></span>
<span id="cb56-15"><a href="helpful-functions.html#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistic: mean</span></span>
<span id="cb56-16"><a href="helpful-functions.html#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistic: sd</span></span>
<span id="cb56-17"><a href="helpful-functions.html#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has siteID column</span></span>
<span id="cb56-18"><a href="helpful-functions.html#cb56-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has time column</span></span>
<span id="cb56-19"><a href="helpful-functions.html#cb56-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has correct time column</span></span>
<span id="cb56-20"><a href="helpful-functions.html#cb56-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div id="generate-forecast-metadata-in-eml" class="section level3" number="11.1.5">
<h3><span class="header-section-number">11.1.5</span> Generate forecast metadata in EML</h3>
<p>The metadata</p>
<p>First, run</p>
<pre><code>create_model_metadata(forecast_file = forecast_file)        </code></pre>
<p>then edit the yml file that is open with the information describing your team and model. There are comments in the yml to help you complete the information. You will only need to generate the yml once unless you change the structure of your model or team members. This will the <code>metadata_yaml</code> in the step step.</p>
<p>Next, run</p>
<pre><code>write_metadata_eml(forecast_file =  forecast_file ,metadata_yaml = metadata_yaml, forecast_issue_time = Sys.Date(), forecast_iteration_id = &quot;1&quot;)</code></pre>
<p>where <code>forecast_issue_time</code> is the time that you generated the forecast. <code>forecast_iteration_id</code> is a unique identifier of your choice that is associated with that iteration of your forecast.</p>
<p><code>write_metadata_eml</code> will generate the xml that you can submitted along with your forecast file.</p>
</div>
<div id="access-efi-snapshots-of-noaa-forecasts-at-neon-sites" class="section level3" number="11.1.6">
<h3><span class="header-section-number">11.1.6</span> Access EFI snapshots of NOAA forecasts at NEON sites</h3>
<p>Many forecasts will want to make use of weather forecasts as potential
drivers. EFI downscales NOAA GEFS 35-day forecast products at each NEON
site and makes this data available. These helper functions provide
convenient access for downloading and stacking the individual forecast
files.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="helpful-functions.html#cb59-1" aria-hidden="true" tabindex="-1"></a>aq_sites <span class="ot">&lt;-</span> <span class="fu">unique</span>(aquatic<span class="sc">$</span>siteID)</span>
<span id="cb59-2"><a href="helpful-functions.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download_noaa</span>(aq_sites)</span>
<span id="cb59-3"><a href="helpful-functions.html#cb59-3" aria-hidden="true" tabindex="-1"></a>noaa_fc <span class="ot">&lt;-</span> <span class="fu">stack_noaa</span>()</span>
<span id="cb59-4"><a href="helpful-functions.html#cb59-4" aria-hidden="true" tabindex="-1"></a>noaa_fc</span>
<span id="cb59-5"><a href="helpful-functions.html#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8,590 x 18</span></span>
<span id="cb59-6"><a href="helpful-functions.html#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    model interval siteID startDate endDate ensemble air_temperature air_pressure</span></span>
<span id="cb59-7"><a href="helpful-functions.html#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb59-8"><a href="helpful-functions.html#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            295.      101473.</span></span>
<span id="cb59-9"><a href="helpful-functions.html#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            291.      101595.</span></span>
<span id="cb59-10"><a href="helpful-functions.html#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            289.      101595.</span></span>
<span id="cb59-11"><a href="helpful-functions.html#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            302.      101602.</span></span>
<span id="cb59-12"><a href="helpful-functions.html#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            296.      101479.</span></span>
<span id="cb59-13"><a href="helpful-functions.html#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            292.      101553.</span></span>
<span id="cb59-14"><a href="helpful-functions.html#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            290.      101461.</span></span>
<span id="cb59-15"><a href="helpful-functions.html#cb59-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            302.      101408.</span></span>
<span id="cb59-16"><a href="helpful-functions.html#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            296.      101281.</span></span>
<span id="cb59-17"><a href="helpful-functions.html#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 NOAA… 6hr      BARC   2021-03-… 2021-0… ens00.nc            291.      101360.</span></span>
<span id="cb59-18"><a href="helpful-functions.html#cb59-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 8,580 more rows, and 10 more variables: relative_humidity &lt;dbl&gt;,</span></span>
<span id="cb59-19"><a href="helpful-functions.html#cb59-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   surface_downwelling_longwave_flux_in_air &lt;dbl&gt;,</span></span>
<span id="cb59-20"><a href="helpful-functions.html#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   surface_downwelling_shortwave_flux_in_air &lt;dbl&gt;, precipitation_flux &lt;dbl&gt;,</span></span>
<span id="cb59-21"><a href="helpful-functions.html#cb59-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   specific_humidity &lt;dbl&gt;, cloud_area_fraction &lt;dbl&gt;, wind_speed &lt;dbl&gt;,</span></span>
<span id="cb59-22"><a href="helpful-functions.html#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   time &lt;dbl&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div id="submit-a-forecast" class="section level3" number="11.1.7">
<h3><span class="header-section-number">11.1.7</span> Submit a forecast</h3>
<p>When you are ready to submit your forecast to EFI:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="helpful-functions.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">submit</span>(forecast_file)</span>
<span id="cb60-2"><a href="helpful-functions.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; aquatics-2021-03-17-example_null.csv.gz</span></span>
<span id="cb60-3"><a href="helpful-functions.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file name is correct</span></span>
<span id="cb60-4"><a href="helpful-functions.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb60-5"><a href="helpful-functions.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb60-6"><a href="helpful-functions.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb60-7"><a href="helpful-functions.html#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   time = col_date(format = &quot;&quot;),</span></span>
<span id="cb60-8"><a href="helpful-functions.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   siteID = col_character(),</span></span>
<span id="cb60-9"><a href="helpful-functions.html#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   statistic = col_character(),</span></span>
<span id="cb60-10"><a href="helpful-functions.html#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   oxygen = col_double(),</span></span>
<span id="cb60-11"><a href="helpful-functions.html#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   temperature = col_double()</span></span>
<span id="cb60-12"><a href="helpful-functions.html#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb60-13"><a href="helpful-functions.html#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ target variables found</span></span>
<span id="cb60-14"><a href="helpful-functions.html#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistics column</span></span>
<span id="cb60-15"><a href="helpful-functions.html#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistic: mean</span></span>
<span id="cb60-16"><a href="helpful-functions.html#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has summary statistic: sd</span></span>
<span id="cb60-17"><a href="helpful-functions.html#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has siteID column</span></span>
<span id="cb60-18"><a href="helpful-functions.html#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has time column</span></span>
<span id="cb60-19"><a href="helpful-functions.html#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✓ file has correct time column</span></span></code></pre></div>
<p>Ideally you should include the optional <code>metadata =</code> argument with your
metadata file.</p>
</div>
</div>
<div id="neonstore-package" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> neonstore package</h2>
<p>The neonstore package is located at <a href="https://github.com/eco4cast/neon4cast" class="uri">https://github.com/eco4cast/neon4cast</a></p>
<p><code>neonstore</code> provides quick access and persistent storage of NEON data tables. <code>neonstore</code> emphasizes simplicity and a clean data provenance trail, see Provenance section below.</p>
<!-- badges: start -->
<p><a href="https://github.com/cboettig/neonstore/actions"><img src="https://github.com/cboettig/neonstore/workflows/R-CMD-check/badge.svg" alt="R build status" /></a>
<a href="https://codecov.io/gh/cboettig/neonstore?branch=master"><img src="https://codecov.io/gh/cboettig/neonstore/branch/master/graph/badge.svg" alt="Codecov test coverage" /></a>
<a href="https://CRAN.R-project.org/package=neonstore"><img src="https://www.r-pkg.org/badges/version/neonstore" alt="CRAN status" /></a>
<!-- badges: end --></p>
<p><code>neonstore</code> provides quick access and persistent storage of NEON data
tables. <code>neonstore</code> emphasizes simplicity and a clean data provenance
trail, see Provenance section below.</p>
<div id="installation-1" class="section level3" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> Installation</h3>
<p>Install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="helpful-functions.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb61-2"><a href="helpful-functions.html#cb61-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;cboettig/neonstore&quot;</span>)</span></code></pre></div>
</div>
<div id="quickstart" class="section level3" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Quickstart</h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="helpful-functions.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(neonstore)</span></code></pre></div>
<p>Discover data products of interest:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="helpful-functions.html#cb63-1" aria-hidden="true" tabindex="-1"></a>products <span class="ot">&lt;-</span> <span class="fu">neon_products</span>()</span>
<span id="cb63-2"><a href="helpful-functions.html#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="helpful-functions.html#cb63-3" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">&quot;Populations&quot;</span>, products<span class="sc">$</span>themes)</span>
<span id="cb63-4"><a href="helpful-functions.html#cb63-4" aria-hidden="true" tabindex="-1"></a>products[i, <span class="fu">c</span>(<span class="st">&quot;productCode&quot;</span>, <span class="st">&quot;productName&quot;</span>)]</span>
<span id="cb63-5"><a href="helpful-functions.html#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 50 x 2</span></span>
<span id="cb63-6"><a href="helpful-functions.html#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    productCode   productName                                              </span></span>
<span id="cb63-7"><a href="helpful-functions.html#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;                                                    </span></span>
<span id="cb63-8"><a href="helpful-functions.html#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 DP1.00033.001 Phenology images                                         </span></span>
<span id="cb63-9"><a href="helpful-functions.html#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 DP1.10003.001 Breeding landbird point counts                           </span></span>
<span id="cb63-10"><a href="helpful-functions.html#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 DP1.10010.001 Coarse downed wood log survey                            </span></span>
<span id="cb63-11"><a href="helpful-functions.html#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 DP1.10020.001 Ground beetle sequences DNA barcode                      </span></span>
<span id="cb63-12"><a href="helpful-functions.html#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 DP1.10022.001 Ground beetles sampled from pitfall traps                </span></span>
<span id="cb63-13"><a href="helpful-functions.html#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 DP1.10026.001 Plant foliar traits                                      </span></span>
<span id="cb63-14"><a href="helpful-functions.html#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 DP1.10033.001 Litterfall and fine woody debris production and chemistry</span></span>
<span id="cb63-15"><a href="helpful-functions.html#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 DP1.10038.001 Mosquito sequences DNA barcode                           </span></span>
<span id="cb63-16"><a href="helpful-functions.html#cb63-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 DP1.10041.001 Mosquito-borne pathogen status                           </span></span>
<span id="cb63-17"><a href="helpful-functions.html#cb63-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 DP1.10043.001 Mosquitoes sampled from CO2 traps                        </span></span>
<span id="cb63-18"><a href="helpful-functions.html#cb63-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 40 more rows</span></span>
<span id="cb63-19"><a href="helpful-functions.html#cb63-19" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb63-20"><a href="helpful-functions.html#cb63-20" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">&quot;bird&quot;</span>, products<span class="sc">$</span>keywords)</span>
<span id="cb63-21"><a href="helpful-functions.html#cb63-21" aria-hidden="true" tabindex="-1"></a>products[i, <span class="fu">c</span>(<span class="st">&quot;productCode&quot;</span>, <span class="st">&quot;productName&quot;</span>)]</span>
<span id="cb63-22"><a href="helpful-functions.html#cb63-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 2</span></span>
<span id="cb63-23"><a href="helpful-functions.html#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   productCode   productName                   </span></span>
<span id="cb63-24"><a href="helpful-functions.html#cb63-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;                         </span></span>
<span id="cb63-25"><a href="helpful-functions.html#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 DP1.10003.001 Breeding landbird point counts</span></span></code></pre></div>
<p>Download all data files in the bird survey data products.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="helpful-functions.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_download</span>(<span class="st">&quot;DP1.10003.001&quot;</span>)</span>
<span id="cb64-2"><a href="helpful-functions.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   comparing hashes against local file index...</span></span>
<span id="cb64-3"><a href="helpful-functions.html#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   updating release manifest...</span></span></code></pre></div>
<p>View your store of NEON products:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="helpful-functions.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_index</span>()</span>
<span id="cb65-2"><a href="helpful-functions.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 854 x 15</span></span>
<span id="cb65-3"><a href="helpful-functions.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    product  site  table   type  ext   month timestamp           horizontalPosit…</span></span>
<span id="cb65-4"><a href="helpful-functions.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dttm&gt;                         &lt;dbl&gt;</span></span>
<span id="cb65-5"><a href="helpful-functions.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 DP1.100… BART  brd_co… basic csv   2015… 2020-12-23 14:17:30               NA</span></span>
<span id="cb65-6"><a href="helpful-functions.html#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 DP1.100… BART  brd_co… basic csv   2016… 2020-12-23 14:17:14               NA</span></span>
<span id="cb65-7"><a href="helpful-functions.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 DP1.100… BART  brd_co… basic csv   2017… 2020-12-23 14:17:36               NA</span></span>
<span id="cb65-8"><a href="helpful-functions.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 DP1.100… BART  brd_co… basic csv   2018… 2020-12-23 14:17:21               NA</span></span>
<span id="cb65-9"><a href="helpful-functions.html#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 DP1.100… BART  brd_co… basic csv   2019… 2020-12-23 14:17:45               NA</span></span>
<span id="cb65-10"><a href="helpful-functions.html#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 DP1.100… BART  brd_co… basic csv   2020… 2020-12-23 14:17:03               NA</span></span>
<span id="cb65-11"><a href="helpful-functions.html#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 DP1.100… BART  brd_co… basic csv   2020… 2020-12-23 14:17:41               NA</span></span>
<span id="cb65-12"><a href="helpful-functions.html#cb65-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 DP1.100… BART  brd_pe… basic csv   2015… 2020-12-23 14:17:30               NA</span></span>
<span id="cb65-13"><a href="helpful-functions.html#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 DP1.100… BART  brd_pe… basic csv   2016… 2020-12-23 14:17:14               NA</span></span>
<span id="cb65-14"><a href="helpful-functions.html#cb65-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 DP1.100… BART  brd_pe… basic csv   2017… 2020-12-23 14:17:36               NA</span></span>
<span id="cb65-15"><a href="helpful-functions.html#cb65-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 844 more rows, and 7 more variables: verticalPosition &lt;dbl&gt;,</span></span>
<span id="cb65-16"><a href="helpful-functions.html#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   samplingInterval &lt;chr&gt;, date_range &lt;chr&gt;, path &lt;chr&gt;, md5 &lt;chr&gt;,</span></span>
<span id="cb65-17"><a href="helpful-functions.html#cb65-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   crc32 &lt;chr&gt;, release &lt;chr&gt;</span></span></code></pre></div>
<p>These files will persist between sessions, so you only need to download
once or to retrieve updates. <code>neon_index()</code> can take arguments to filter
by product or pattern (regular expression) in table name,
e.g.<code>neon_index(table = "brd")</code>.</p>
<p>Once you determine the table of interest, you can read in all the
component tables into a single <code>data.frame</code></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="helpful-functions.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_read</span>(<span class="st">&quot;brd_countdata-expanded&quot;</span>)</span>
<span id="cb66-2"><a href="helpful-functions.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
</div>
<div id="database-backend" class="section level3" number="11.2.3">
<h3><span class="header-section-number">11.2.3</span> Database backend</h3>
<p><code>neonstore</code> now supports a backend relation database as well. Import
data from the raw downloaded files using <code>neon_store()</code>:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="helpful-functions.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_store</span>(<span class="at">table =</span> <span class="st">&quot;brd_countdata-expanded&quot;</span>)</span>
<span id="cb67-2"><a href="helpful-functions.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; table brd_countdata-expanded not found, do you need to download first?</span></span></code></pre></div>
<p>Alternately, we could import all data tables associated with a given
product:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="helpful-functions.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_store</span>(<span class="at">product =</span> <span class="st">&quot;DP1.10003.001&quot;</span>)</span>
<span id="cb68-2"><a href="helpful-functions.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   importing brd_countdata-basic-DP1.10003.001...</span></span>
<span id="cb68-3"><a href="helpful-functions.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   importing brd_perpoint-basic-DP1.10003.001...</span></span></code></pre></div>
<p>Access an imported table using <code>neon_table()</code> instead of <code>neon_read()</code>:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="helpful-functions.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">neon_table</span>(<span class="st">&quot;brd_countdata&quot;</span>)</span>
<span id="cb69-2"><a href="helpful-functions.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 203,220 x 23</span></span>
<span id="cb69-3"><a href="helpful-functions.html#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    uid                namedLocation     domainID siteID plotID plotType  pointID</span></span>
<span id="cb69-4"><a href="helpful-functions.html#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;  </span></span>
<span id="cb69-5"><a href="helpful-functions.html#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 01cef6c1-5851-407… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb69-6"><a href="helpful-functions.html#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 43990e9a-1412-427… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb69-7"><a href="helpful-functions.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 d4f59f3c-e3f1-4a7… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb69-8"><a href="helpful-functions.html#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 4ad44b7d-1eb6-465… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb69-9"><a href="helpful-functions.html#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 944a3e0e-08de-497… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb69-10"><a href="helpful-functions.html#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 d4cb0f22-923b-449… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… C1     </span></span>
<span id="cb69-11"><a href="helpful-functions.html#cb69-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 0cc69b4f-650f-4f7… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… B1     </span></span>
<span id="cb69-12"><a href="helpful-functions.html#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 c6367f2f-8b74-402… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… B1     </span></span>
<span id="cb69-13"><a href="helpful-functions.html#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 406e8277-2c18-4b2… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… B1     </span></span>
<span id="cb69-14"><a href="helpful-functions.html#cb69-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 ef879541-c8d5-41c… HEAL_006.birdGri… D19      HEAL   HEAL_… distribu… B1     </span></span>
<span id="cb69-15"><a href="helpful-functions.html#cb69-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 203,210 more rows, and 16 more variables: startDate &lt;dttm&gt;,</span></span>
<span id="cb69-16"><a href="helpful-functions.html#cb69-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   eventID &lt;chr&gt;, pointCountMinute &lt;dbl&gt;, targetTaxaPresent &lt;chr&gt;,</span></span>
<span id="cb69-17"><a href="helpful-functions.html#cb69-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   taxonID &lt;chr&gt;, scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;, vernacularName &lt;chr&gt;,</span></span>
<span id="cb69-18"><a href="helpful-functions.html#cb69-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   observerDistance &lt;dbl&gt;, detectionMethod &lt;chr&gt;, visualConfirmation &lt;chr&gt;,</span></span>
<span id="cb69-19"><a href="helpful-functions.html#cb69-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   sexOrAge &lt;chr&gt;, clusterSize &lt;dbl&gt;, clusterCode &lt;chr&gt;, identifiedBy &lt;chr&gt;,</span></span>
<span id="cb69-20"><a href="helpful-functions.html#cb69-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   file &lt;chr&gt;</span></span></code></pre></div>
<p>Access the remote database using <code>neon_db()</code>. This is a <code>DBIConnection</code>
that can easily be used with <code>dplyr</code> functions like <code>tbl()</code> or
<code>filter()</code>.<br />
Remember that <code>dplyr</code> translates these into SQL queries that run
directly on the database.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="helpful-functions.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb70-2"><a href="helpful-functions.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb70-3"><a href="helpful-functions.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;dplyr&#39;</span></span>
<span id="cb70-4"><a href="helpful-functions.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb70-5"><a href="helpful-functions.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb70-6"><a href="helpful-functions.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb70-7"><a href="helpful-functions.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></span>
<span id="cb70-8"><a href="helpful-functions.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb70-9"><a href="helpful-functions.html#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb70-10"><a href="helpful-functions.html#cb70-10" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">neon_db</span>()</span>
<span id="cb70-11"><a href="helpful-functions.html#cb70-11" aria-hidden="true" tabindex="-1"></a>brd <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">&quot;brd_countdata-basic-DP1.10003.001&quot;</span>)</span>
<span id="cb70-12"><a href="helpful-functions.html#cb70-12" aria-hidden="true" tabindex="-1"></a>brd <span class="sc">%&gt;%</span> <span class="fu">filter</span>(siteID <span class="sc">==</span> <span class="st">&quot;ORNL&quot;</span>)</span>
<span id="cb70-13"><a href="helpful-functions.html#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8,797 x 23</span></span>
<span id="cb70-14"><a href="helpful-functions.html#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    uid                namedLocation     domainID siteID plotID plotType  pointID</span></span>
<span id="cb70-15"><a href="helpful-functions.html#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;              &lt;chr&gt;             &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;  </span></span>
<span id="cb70-16"><a href="helpful-functions.html#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 33425600-9ce1-4a9… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-17"><a href="helpful-functions.html#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 faf5ee98-43e9-40f… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-18"><a href="helpful-functions.html#cb70-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2dc63a4a-3da1-4e0… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-19"><a href="helpful-functions.html#cb70-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 7952192b-55b4-48f… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-20"><a href="helpful-functions.html#cb70-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 41bf843e-3433-4d0… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-21"><a href="helpful-functions.html#cb70-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 e88d8ada-e43a-409… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-22"><a href="helpful-functions.html#cb70-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 04604bac-dd88-4d1… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-23"><a href="helpful-functions.html#cb70-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 05a8d535-3f59-413… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-24"><a href="helpful-functions.html#cb70-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 b5cccafa-acbf-41e… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-25"><a href="helpful-functions.html#cb70-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 63d9e30e-ab6c-41b… ORNL_002.birdGri… D07      ORNL   ORNL_… distribu… A1     </span></span>
<span id="cb70-26"><a href="helpful-functions.html#cb70-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 8,787 more rows, and 16 more variables: startDate &lt;dttm&gt;,</span></span>
<span id="cb70-27"><a href="helpful-functions.html#cb70-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   eventID &lt;chr&gt;, pointCountMinute &lt;dbl&gt;, targetTaxaPresent &lt;chr&gt;,</span></span>
<span id="cb70-28"><a href="helpful-functions.html#cb70-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   taxonID &lt;chr&gt;, scientificName &lt;chr&gt;, taxonRank &lt;chr&gt;, vernacularName &lt;chr&gt;,</span></span>
<span id="cb70-29"><a href="helpful-functions.html#cb70-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   observerDistance &lt;dbl&gt;, detectionMethod &lt;chr&gt;, visualConfirmation &lt;chr&gt;,</span></span>
<span id="cb70-30"><a href="helpful-functions.html#cb70-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   sexOrAge &lt;chr&gt;, clusterSize &lt;dbl&gt;, clusterCode &lt;chr&gt;, identifiedBy &lt;chr&gt;,</span></span>
<span id="cb70-31"><a href="helpful-functions.html#cb70-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   file &lt;chr&gt;</span></span></code></pre></div>
<p>Note that we need to include the product name in the table name when
accessing the database, as table names alone may not be unique. RStudio
users can also list and explore all tables interactively in the
Connections pane in RStudio using <code>neon_pane()</code>.</p>
</div>
<div id="note-on-api-limits" class="section level3" number="11.2.4">
<h3><span class="header-section-number">11.2.4</span> Note on API limits</h3>
<p>If <code>neon_download()</code> exceeds the API request limit (with or without the
token), <code>neonstore</code> will simply pause for the required amount of time to
avoid rate-limit-based errors.</p>
<p><a href="https://data.neonscience.org/data-api/rate-limiting/#api-tokens">The NEON API now rate-limits
requests.</a>.
Using a personal token will increase the number of requests you can make
before encountering this delay. See link for directions on registering
for a token. Then pass this token in <code>.token</code> argument of
<code>neon_download()</code>, or for frequent use, add this token as an
environmental variable, <code>NEON_DATA</code> to your local <code>.Renviron</code> file in
your user’s home directory. <code>neon_download()</code> must first query each the
API of each NEON site which collects that product, for each month the
product is collected.</p>
<p>(It would be much more efficient on the NEON server if the API could
take queries of the from <code>/data/&lt;product&gt;/&lt;site&gt;</code>, and pool the results,
rather than require each month of sampling separately!)</p>
</div>
<div id="non-stacking-files-and-low-level-interface" class="section level3" number="11.2.5">
<h3><span class="header-section-number">11.2.5</span> Non-stacking files and low-level interface</h3>
<p>At it’s core, <code>neonstore</code> is simply a mechanism to download files from
the NEON API. While the <code>.csv</code> files from the Observation Systems (OS,
e.g. bird count surveys), and Instrument Systems (e.g. aquatic sensors)
are typically stacked into large tables, other products, such as the
<code>.laz</code> and <code>.tif</code> images produced by the airborne observation platform
LIDAR and cameras may require a different approach.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="helpful-functions.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in a large file list for illustration purposes</span></span>
<span id="cb71-2"><a href="helpful-functions.html#cb71-2" aria-hidden="true" tabindex="-1"></a>cper_data <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;https://minio.thelio.carlboettiger.info/shared-data/neon_data_catalog.csv.gz&quot;</span>)</span>
<span id="cb71-3"><a href="helpful-functions.html#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Registered S3 methods overwritten by &#39;readr&#39;:</span></span>
<span id="cb71-4"><a href="helpful-functions.html#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   method           from </span></span>
<span id="cb71-5"><a href="helpful-functions.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   format.col_spec  vroom</span></span>
<span id="cb71-6"><a href="helpful-functions.html#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.col_spec   vroom</span></span>
<span id="cb71-7"><a href="helpful-functions.html#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.collector  vroom</span></span>
<span id="cb71-8"><a href="helpful-functions.html#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.date_names vroom</span></span>
<span id="cb71-9"><a href="helpful-functions.html#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   print.locale     vroom</span></span>
<span id="cb71-10"><a href="helpful-functions.html#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   str.col_spec     vroom</span></span>
<span id="cb71-11"><a href="helpful-functions.html#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb71-12"><a href="helpful-functions.html#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb71-13"><a href="helpful-functions.html#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb71-14"><a href="helpful-functions.html#cb71-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   crc32 = col_character(),</span></span>
<span id="cb71-15"><a href="helpful-functions.html#cb71-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name = col_character(),</span></span>
<span id="cb71-16"><a href="helpful-functions.html#cb71-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   size = col_double(),</span></span>
<span id="cb71-17"><a href="helpful-functions.html#cb71-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   url = col_character()</span></span>
<span id="cb71-18"><a href="helpful-functions.html#cb71-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb71-19"><a href="helpful-functions.html#cb71-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-20"><a href="helpful-functions.html#cb71-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Typically one would read all files in local store, e.g. list.file(neon_dir())</span></span>
<span id="cb71-21"><a href="helpful-functions.html#cb71-21" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">neon_filename_parser</span>(cper_data<span class="sc">$</span>name)</span></code></pre></div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="helpful-functions.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb72-2"><a href="helpful-functions.html#cb72-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">count</span>(EXT, <span class="at">sort=</span><span class="cn">TRUE</span>)</span>
<span id="cb72-3"><a href="helpful-functions.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 13 x 2</span></span>
<span id="cb72-4"><a href="helpful-functions.html#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    EXT       n</span></span>
<span id="cb72-5"><a href="helpful-functions.html#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt; &lt;int&gt;</span></span>
<span id="cb72-6"><a href="helpful-functions.html#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 csv   38816</span></span>
<span id="cb72-7"><a href="helpful-functions.html#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 &lt;NA&gt;   8938</span></span>
<span id="cb72-8"><a href="helpful-functions.html#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 zip    4197</span></span>
<span id="cb72-9"><a href="helpful-functions.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 tif    3994</span></span>
<span id="cb72-10"><a href="helpful-functions.html#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 txt    3359</span></span>
<span id="cb72-11"><a href="helpful-functions.html#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 xml    3316</span></span>
<span id="cb72-12"><a href="helpful-functions.html#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 kml    1155</span></span>
<span id="cb72-13"><a href="helpful-functions.html#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 dbf    1100</span></span>
<span id="cb72-14"><a href="helpful-functions.html#cb72-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 prj    1100</span></span>
<span id="cb72-15"><a href="helpful-functions.html#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 shp    1100</span></span>
<span id="cb72-16"><a href="helpful-functions.html#cb72-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 shx    1100</span></span>
<span id="cb72-17"><a href="helpful-functions.html#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 h5     1093</span></span>
<span id="cb72-18"><a href="helpful-functions.html#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 laz     330</span></span></code></pre></div>
<p>We can take a look at all <code>laz</code> LIDAR files:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="helpful-functions.html#cb73-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="helpful-functions.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(EXT <span class="sc">==</span> <span class="st">&quot;laz&quot;</span>)</span>
<span id="cb73-3"><a href="helpful-functions.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 330 x 31</span></span>
<span id="cb73-4"><a href="helpful-functions.html#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    NEON  DOM   SITE  DPL   PRNUM REV   DESC  YYYY_MM PKGTYPE GENTIME EXT   name </span></span>
<span id="cb73-5"><a href="helpful-functions.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;</span></span>
<span id="cb73-6"><a href="helpful-functions.html#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-7"><a href="helpful-functions.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-8"><a href="helpful-functions.html#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-9"><a href="helpful-functions.html#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-10"><a href="helpful-functions.html#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  uncl… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-11"><a href="helpful-functions.html#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-12"><a href="helpful-functions.html#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-13"><a href="helpful-functions.html#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-14"><a href="helpful-functions.html#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  clas… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-15"><a href="helpful-functions.html#cb73-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 NEON  D10   CPER  DP1   &lt;NA&gt;  &lt;NA&gt;  uncl… &lt;NA&gt;    &lt;NA&gt;    &lt;NA&gt;    laz   NEON…</span></span>
<span id="cb73-16"><a href="helpful-functions.html#cb73-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 320 more rows, and 19 more variables: MISC &lt;chr&gt;, HOR &lt;chr&gt;,</span></span>
<span id="cb73-17"><a href="helpful-functions.html#cb73-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   VER &lt;chr&gt;, TMI &lt;chr&gt;, YYYY_MM_DD &lt;chr&gt;, DATE_RANGE &lt;chr&gt;, FLHTSTRT &lt;chr&gt;,</span></span>
<span id="cb73-18"><a href="helpful-functions.html#cb73-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   EHCCCCCC &lt;chr&gt;, IMAGEDATETIME &lt;chr&gt;, NNNN &lt;chr&gt;, NNN &lt;chr&gt;, R &lt;chr&gt;,</span></span>
<span id="cb73-19"><a href="helpful-functions.html#cb73-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   FLIGHTSTRT &lt;chr&gt;, EEEEEE &lt;chr&gt;, NNNNNNN &lt;chr&gt;, FLHTDATE &lt;chr&gt;,</span></span>
<span id="cb73-20"><a href="helpful-functions.html#cb73-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   FFFFFF &lt;chr&gt;, README &lt;lgl&gt;, COMPRESSION &lt;lgl&gt;</span></span></code></pre></div>
<p>Note that many of the airborne observation platform (AOP) products, such
as these LIDAR files, do not include the PRNUM or REV components that make up part of the <code>productCode</code>s used in the NEON <code>product</code> tables.</p>
</div>
</div>
<div id="efistandards-package" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> EFIstandards package</h2>
<!-- badges: start -->
<p><a href="https://github.com/cboettig/forecast-standards/actions"><img src="https://github.com/cboettig/forecast-standards/workflows/R-CMD-check/badge.svg" alt="R build status" /></a>
<a href="https://CRAN.R-project.org/package=EFIstandards"><img src="https://www.r-pkg.org/badges/version/EFIstandards" alt="CRAN status" /></a>
<a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental" /></a>
<!-- badges: end --></p>
<p>This package summarizes the proposed community standards for the common formatting and archiving of ecological forecasts developed by the Ecological Forecasting Initiative (EFI). Such open standards are intended to promote interoperability and facilitate forecast adoption, distribution, validation, and synthesis.</p>
<div id="output-files" class="section level3" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Output Files:</h3>
<p>EFI has proposed a three-tiered approach reflecting trade-offs in forecast data volume and technical expertise. The prefered output file format is in netCDF following standard CF conventions for dimensions and variable naming conventions, with ensemble member as a dimension where appropriate. The second-tier option is a semi-long CSV format, with state variables as columns and each row representing a unique issue datetime, prediction datetime, location, ensemble member, etc. The third-tier option is similar to option 2, but each row represents a specific summary statistic (mean, upper/lower CI) rather than individual ensemble members.</p>
</div>
<div id="output-metadata" class="section level3" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Output Metadata:</h3>
<p>EFI’s proposed metadata represents an expansion upon the Ecological Metadata Language (EML), with two key differences. First, is the specification of additonalMetadata tags to store forecast specific information (e.g. uncertainty propagation and data assimilation) as well as some summary information about model complexity, included uncertainties, etc. designed to facilitate cross-forecast synthesis. Second, a number of EML tags (e.g. temporal resolution, output variables) are considered a required part of forecast metadata that are otherwise optional in base EML.</p>
<p>This package includes an R tool for validating these EML files.</p>
</div>
<div id="archiving" class="section level3" number="11.3.3">
<h3><span class="header-section-number">11.3.3</span> Archiving:</h3>
<p>EFI envisions a three-tiered approach to forecast archiving. At the most basic level, forecasts should be archived before new observations become available (not possible for hindcasts), preferably in a FAIR public archive that permits forecasts to be uploaded automatically, allows metadata to be searchable, and assigns a DOI. Second, in addition to this the codes used to generate forecasts should also be archived, preferably in an open archive or code repository (e.g. Github) that can be assigned a DOI. Finally, in addition to output and code archiving, we encourage running forecast workflows to be archived using virtualization approaches, such as Docker or Singularity containers.</p>
</div>
<div id="vignettes" class="section level3" number="11.3.4">
<h3><span class="header-section-number">11.3.4</span> Vignettes:</h3>
<p>This package includes a number of vignettes illustrating the application of the EFI standards to different forecasts</p>
</div>
<div id="documentation" class="section level3" number="11.3.5">
<h3><span class="header-section-number">11.3.5</span> Documentation:</h3>
<p>A more detailed description of the EFI standard can be found at <a href="https://shorturl.at/irMQW">https://shorturl.at/irMQW</a>. Note that the Standard is a work in progress. If you find issues as you are applying them, let us know at <a href="mailto:eco4cast.initiative@gmail.com" class="email">eco4cast.initiative@gmail.com</a>.</p>
<p>Pkgdown rendered documentation of functions and vignettes can be found at <a href="https://eco4cast.github.io/EFIstandards/" class="uri">https://eco4cast.github.io/EFIstandards/</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="meteorology-inputs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="frequently-asked-questions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-start.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
